<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mansavi ‚Äî Will you be my girlfriend?</title>
  <meta name="description" content="A romantic animated proposal page from Ashish to Mansavi." />
  <!-- Elegant fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-1:#071022;
      --bg-2:#0f2340;
      --accent:#ff4d8d;
      --muted:rgba(255,255,255,0.12);
      --card: rgba(255,255,255,0.04);
      --text:#f7f7fb;
      --glass-border: rgba(255,255,255,0.06);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      color:var(--text);
      background:
        radial-gradient(600px 300px at 85% 10%, rgba(255,77,141,0.06), transparent 30%),
        linear-gradient(170deg,var(--bg-1),var(--bg-2));
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }

    /* hearts background */
    .hearts { position: fixed; inset:0; pointer-events:none; z-index:0; overflow:hidden; }
    .heart{
      position:absolute;
      width:16px; height:16px;
      transform:rotate(45deg);
      background:var(--accent);
      filter: drop-shadow(0 0 10px rgba(255,77,141,.45));
      opacity:0;
      animation: floatUp linear infinite;
      border-radius:2px;
    }
    .heart:before,.heart:after{ content:""; position:absolute; width:16px; height:16px; background:var(--accent); border-radius:50%;}
    .heart:before{ left:-8px; top:0; } .heart:after{ left:0; top:-8px; }
    @keyframes floatUp{
      0%{ transform: translateY(0) rotate(45deg) scale(0.9); opacity:0; }
      10%{ opacity:0.95; }
      100%{ transform: translateY(-120vh) rotate(45deg) scale(1.4); opacity:0; }
    }

    /* layout */
    .wrap{ position:relative; z-index:1; min-height:100dvh; display:grid; place-items:center; padding:28px; }
    .card{
      width:min(980px,94vw);
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border:1px solid var(--glass-border);
      border-radius:20px;
      padding:26px;
      box-shadow: 0 12px 40px rgba(2,10,23,0.6);
      backdrop-filter: blur(8px);
    }
    header{ text-align:center; display:flex; align-items:center; gap:12px; justify-content:center; flex-wrap:wrap; }
    .ring{ font-size:28px; filter:drop-shadow(0 6px 18px rgba(255,77,141,.15)); }
    h1{
      font-family:"Great Vibes",cursive;
      font-size: clamp(36px,6vw,64px);
      margin:6px 0 2px;
      line-height:1;
      color:var(--accent);
      text-shadow: 0 6px 30px rgba(255,77,141,0.08);
    }
    .subtitle{ text-align:center; margin-top:6px; font-size:15px; opacity:0.92; color: #e8eaf2; }

    .grid{ display:grid; grid-template-columns: 1.1fr .9fr; gap:20px; margin-top:18px; align-items:start;}
    @media (max-width:880px){ .grid{ grid-template-columns:1fr } }

    .photo{
      border-radius:16px; overflow:hidden; border:1px solid var(--glass-border);
      aspect-ratio: 16/9; display:grid; place-items:center; background: linear-gradient(180deg, rgba(255,77,141,0.03), rgba(255,255,255,0.01));
      box-shadow: 0 8px 30px rgba(0,0,0,0.4);
    }
    .photo img{ width:100%; height:100%; object-fit:cover; display:block; }
    .photo .placeholder{ font-family:"Great Vibes", cursive; font-size:28px; color: rgba(255,255,255,0.9); }

    .letter{
      background:var(--card); border-radius:14px; padding:16px; position:relative; border:1px solid var(--glass-border); min-height:280px;
    }
    .typewriter{ white-space:pre-wrap; font-size:15.5px; line-height:1.6; min-height:120px; color:#f6f6fb; }
    .cursor{ display:inline-block; width:1ch; animation: blink 1s steps(1) infinite; vertical-align:bottom; }
    @keyframes blink{ 50%{ opacity:0 } }

    /* envelope */
    .envelope{ width:160px; height:110px; margin:14px auto 6px; position:relative; cursor:pointer; perspective:800px; }
    .env-body{ position:absolute; inset:0; background:#102233; border-radius:10px; border:1px solid var(--glass-border); top:16px; box-shadow: 0 6px 18px rgba(0,0,0,0.45); display:grid; place-items:center; overflow:hidden;}
    .env-flap{ position:absolute; left:0; right:0; top:0; height:58%; background:#133048; border-top-left-radius:10px; border-top-right-radius:10px; transform-origin:top; transition: transform .6s cubic-bezier(.2,.9,.3,1); border:1px solid var(--glass-border); }
    .seal{ position:absolute; left:50%; top:42px; transform:translateX(-50%); width:36px; height:36px; border-radius:50%; background: radial-gradient(circle at 30% 30%, #ffb4cc, var(--accent)); box-shadow: 0 6px 18px rgba(255,77,141,0.18); }
    .note{ position:absolute; left:8%; right:8%; top:66%; height:0; background: #0a1626; border-radius:8px; border:1px solid var(--glass-border); overflow:hidden; display:grid; place-items:center; transition: height .55s ease, top .55s ease; padding:0 8px; }
    .envelope.open .env-flap{ transform: rotateX(180deg); }
    .envelope.open .note{ height:84%; top:6%; }
    .note p{ font-family:"Great Vibes", cursive; font-size:20px; margin:12px; color: #ffdce6; text-align:center; }

    /* buttons */
    .cta{ display:flex; gap:12px; justify-content:center; margin-top:12px; flex-wrap:wrap; }
    .btn{
      padding:12px 18px; border-radius:999px; border:1px solid var(--glass-border); background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02)); cursor:pointer; font-weight:600;
      transition: transform .15s ease, box-shadow .18s ease;
    }
    .btn:focus{ outline:3px solid rgba(255,77,141,0.12); outline-offset:3px; }
    .btn.primary{ background: linear-gradient(180deg, #ff7aa6, var(--accent)); color:white; border:none; box-shadow: 0 8px 40px rgba(255,77,141,0.12); }
    .btn.ghost{ background:transparent; color: #ffdce6; border:1px dashed rgba(255,255,255,0.06); }

    /* evasive */
    .evasive{ position:relative; }

    /* modal */
    .modal{ position:fixed; inset:0; display:grid; place-items:center; background: rgba(0,0,0,0.56); z-index:30; visibility:hidden; opacity:0; transition: all .25s ease; }
    .modal.open{ visibility:visible; opacity:1; }
    .modal-card{ width:min(540px,92vw); background:#071425; border-radius:14px; padding:20px; text-align:center; border:1px solid var(--glass-border); box-shadow: 0 20px 60px rgba(0,0,0,0.6); }
    .modal-card h2{ margin:0 0 8px; font-size:24px; color:var(--accent); font-family:"Great Vibes", cursive; }

    /* confetti canvas */
    #confetti{ position:fixed; inset:0; pointer-events:none; z-index:25; }

    footer{ text-align:center; margin-top:10px; font-size:13px; opacity:0.85; color:#e6e9f2; }

    /* small helpers */
    @media (prefers-reduced-motion:reduce){ *{ animation:none!important; transition:none!important } .heart{display:none} }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>
  <div class="hearts" id="hearts" aria-hidden="true"></div>

  <div class="wrap">
    <div class="card" role="main">
      <header>
        <div class="ring" aria-hidden="true">üíç</div>
        <h1 id="title">Mansavi, will you be my girlfriend?</h1>
        <div class="ring" aria-hidden="true">üíç</div>
      </header>
      <p class="subtitle">A tiny page from Ashish ‚Äî open the letter, read my heart, and say yes? üí´</p>

      <div class="grid" role="region" aria-label="Proposal content">
        <figure class="photo" aria-hidden="false" aria-label="Photo placeholder">
          <!-- Optional: replace with <img src="your-photo.jpg" alt="Us together"> -->
          <div class="placeholder">Our Story ‚ú®</div>
        </figure>

        <section class="letter" aria-live="polite" aria-atomic="true">
          <div class="typewriter" id="typewriter" aria-hidden="false"></div><span class="cursor" id="cursor">|</span>

          <div class="envelope" id="envelope" tabindex="0" role="button" aria-pressed="false" aria-label="Open love letter">
            <div class="env-body"></div>
            <div class="env-flap"></div>
            <div class="seal" aria-hidden="true"></div>
            <div class="note" aria-hidden="true"><p>Every moment with you feels like home. üíñ</p></div>
          </div>

          <div class="cta">
            <button class="btn primary" id="yesBtn" aria-label="Yes, I will">Yes, a thousand times! üíò</button>
            <button class="btn ghost evasive" id="notYetBtn" aria-label="Not yet">Hmm‚Ä¶ not yet üòÖ</button>
          </div>

          <footer>
            <small>Made with ‚ù§Ô∏è by Ashish ‚Ä¢ <span id="date"></span></small>
          </footer>
        </section>
      </div>
    </div>
  </div>

  <!-- success modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-card">
      <h2>She said YES! üéâ</h2>
      <p>Welcome to our next chapter. Let's celebrate this beautiful moment together. üíû</p>
      <div style="margin-top:14px; display:flex;gap:10px;justify-content:center;">
        <button class="btn primary" id="celebrateAgain">Celebrate again ‚ú®</button>
        <button class="btn" id="closeModal">Close</button>
      </div>
    </div>
  </div>

  <script>
    /* ========== Customizable block ========== */
    const yourName = "Ashish";
    const partnerName = "Mansavi";
    const loveMessage = `Hey ${partnerName} üíñ

I've been thinking of the best way to tell you how special you are.
Your laugh, your kindness, the little ways you make days brighter ‚Äî
they mean everything to me.

I want to be with you through small mornings and big adventures.
Will you make me the happiest person and be mine?`;

    /* ========== Typewriter ========== */
    const typeEl = document.getElementById('typewriter');
    const cursorEl = document.getElementById('cursor');
    let idx = 0;
    function typeStep(){
      if(idx <= loveMessage.length){
        typeEl.textContent = loveMessage.slice(0, idx++);
        const delay = 16 + Math.random()*40;
        setTimeout(typeStep, delay);
      } else {
        cursorEl.style.display = 'none';
      }
    }
    setTimeout(typeStep, 600);

    /* ========== Floating hearts ========== */
    const heartsContainer = document.getElementById('hearts');
    const HEARTS = 22;
    for(let i=0;i<HEARTS;i++){
      const h = document.createElement('div');
      h.className = 'heart';
      const size = 8 + Math.random()*20;
      h.style.width = h.style.height = size + 'px';
      h.style.left = Math.random()*100 + 'vw';
      h.style.bottom = (-10 - Math.random()*60) + 'px';
      const dur = 8 + Math.random()*9;
      h.style.animationDuration = dur + 's';
      h.style.animationDelay = (Math.random()*-dur) + 's';
      heartsContainer.appendChild(h);
    }

    /* ========== Envelope open toggle ========== */
    const envelope = document.getElementById('envelope');
    envelope.addEventListener('click', toggleEnvelope);
    envelope.addEventListener('keydown', (e) => { if(e.key === 'Enter' || e.key === ' ') toggleEnvelope(); });
    function toggleEnvelope(){
      const open = envelope.classList.toggle('open');
      envelope.setAttribute('aria-pressed', open ? 'true' : 'false');
      const note = envelope.querySelector('.note');
      if(open){ note.setAttribute('aria-hidden','false'); } else { note.setAttribute('aria-hidden','true'); }
    }

    /* ========== Evasive 'Not Yet' button ========== */
    const notYetBtn = document.getElementById('notYetBtn');
    function evade(e){
      const btn = notYetBtn;
      const b = btn.getBoundingClientRect();
      const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
      const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);
      // random new position within viewport
      const nx = Math.max(8, Math.min(vw - b.width - 8, (Math.random() * (vw - b.width - 16))));
      const ny = Math.max(80, Math.min(vh - b.height - 8, (Math.random() * (vh - b.height - 120))));
      btn.style.position = 'fixed';
      btn.style.left = nx + 'px';
      btn.style.top = ny + 'px';
    }
    notYetBtn.addEventListener('mouseenter', evade);
    notYetBtn.addEventListener('click', evade);

    /* ========== Confetti (canvas) ========== */
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    let W,H;
    function resize(){ W = canvas.width = window.innerWidth; H = canvas.height = window.innerHeight; }
    window.addEventListener('resize', resize); resize();

    let confetti = [];
    function spawnConfetti(count = 220){
      confetti = [];
      const colors = ['#ff4d8d','#ffd166','#06d6a0','#118ab2','#ef476f'];
      for(let i=0;i<count;i++){
        confetti.push({
          x: Math.random()*W,
          y: -Math.random()*H,
          r: 4 + Math.random()*6,
          vx: -1 + Math.random()*2,
          vy: 2 + Math.random()*4,
          rot: Math.random()*Math.PI*2,
          vr: -0.05 + Math.random()*0.1,
          color: colors[Math.floor(Math.random()*colors.length)],
          shape: Math.random() < 0.78 ? 'rect' : 'heart'
        });
      }
      animateConfetti();
    }

    let confettiRAF;
    function drawConfetti(){
      ctx.clearRect(0,0,W,H);
      for(const p of confetti){
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        if(p.shape === 'rect'){
          ctx.fillStyle = p.color;
          ctx.fillRect(-p.r, -p.r*1.2, p.r*2, p.r*2.4);
        } else {
          // heart shape
          ctx.fillStyle = p.color;
          heartPath(ctx, 0, 0, p.r);
          ctx.fill();
        }
        ctx.restore();

        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.vr;
        // recycle
        if(p.y > H + 30){ p.y = -30; p.x = Math.random()*W; }
      }
    }
    function animateConfetti(){
      drawConfetti();
      confettiRAF = requestAnimationFrame(animateConfetti);
    }
    function heartPath(ctx, x, y, s){
      ctx.beginPath();
      ctx.moveTo(x, y);
      ctx.bezierCurveTo(x, y - s, x - s*1.3, y - s, x - s*1.3, y);
      ctx.bezierCurveTo(x - s*1.3, y + s, x, y + s*1.7, x, y + s*2);
      ctx.bezierCurveTo(x, y + s*1.7, x + s*1.3, y + s, x + s*1.3, y);
      ctx.bezierCurveTo(x + s*1.3, y - s, x, y - s, x, y);
      ctx.closePath();
    }

    /* ========== Modal & Buttons ========== */
    const modal = document.getElementById('modal');
    const yesBtn = document.getElementById('yesBtn');
    const closeModal = document.getElementById('closeModal');
    const celebrateAgain = document.getElementById('celebrateAgain');

    function openModal(){
      spawnConfetti(240);
      modal.classList.add('open');
      modal.setAttribute('aria-hidden','false');
      // stop after some time to save CPU
      setTimeout(() => { cancelAnimationFrame(confettiRAF); ctx.clearRect(0,0,W,H); }, 10000);
    }
    function closeModalFn(){
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden','true');
    }
    yesBtn.addEventListener('click', openModal);
    closeModal.addEventListener('click', closeModalFn);
    celebrateAgain.addEventListener('click', () => spawnConfetti(240));
    window.addEventListener('keydown', (e) => { if(e.key === 'Escape') closeModalFn(); });

    /* ========== footer date ========== */
    document.getElementById('date').textContent = new Date().toLocaleDateString();

    /* ========== small accessibility tweaks ========== */
    // trap focus in modal when open (simple):
    modal.addEventListener('keydown', (e) => {
      if(e.key === 'Tab'){
        const focusable = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        if(focusable.length === 0) return;
        const first = focusable[0], last = focusable[focusable.length-1];
        if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
        else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
      }
    });

    /* ========== Prevent runaway evasive button on small screens ========== */
    if(window.innerWidth < 480){
      notYetBtn.removeEventListener('mouseenter', evade);
      notYetBtn.addEventListener('click', () => {
        const b = notYetBtn.getBoundingClientRect();
        // do a small wiggle instead
        notYetBtn.style.transform = 'translateX(10px)';
        setTimeout(()=> notYetBtn.style.transform = '', 220);
      });
    }
  </script>
</body>
</html>
